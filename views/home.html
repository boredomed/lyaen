<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
        Home - Lyaen
    </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/css/mdb.min.css" rel="stylesheet">
    <!-- jQuery library -->
    <script type="text/javascript">
        const request = new Request('http://localhost:3000/session', { method: 'GET', mode: 'cors', headers: { 'Content-Type': 'application/json;charset=UTF-8' } });

        fetch(request)
            .then(response => {
                if (response.status === 200) {
                    return response.json()
                }
                else if (response.status === 401) {
                    window.location.replace("/");
                }
                else {
                    throw new Error('Something went wrong on api server!');
                }
            })
            .then(data => {
                $("#name").text(data["name"]);
                $("#points").text(data["points"]);
            })
            .then(response => {
                console.debug(response);
                // ...
            }).catch(error => {
                console.error(error);
            });
        function logout() {
            const request = new Request('http://localhost:3000/logout', { method: 'GET', mode: 'cors', headers: { 'Content-Type': 'application/json;charset=UTF-8' } });

            fetch(request)
                .then(response => {
                    if (response.status === 200) {
                        return response.json()
                    }
                    else {
                        throw new Error('Something went wrong on api server!');
                    }
                })
                .then(data => {
                    if (data["status"]) {
                        window.location.replace('/')
                    }
                })
                .then(response => {
                    console.debug(response);
                    // ...
                }).catch(error => {
                    console.error(error);
                });
        }

    </script>
</head>

<body>
    <section class="col-md-12">
        <nav class="mb-1 navbar navbar-expand-lg navbar-dark default-color">
            <a class="navbar-brand" href="#">LYAEN</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent-333" aria-controls="navbarSupportedContent-333"
                aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent-333">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/visits.html">Visits</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/requests.html">Requests</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto nav-flex-icons">

                    <li class="nav-item">
                        <a class="nav-link" id="navbarDropdownMenuLink-4">
                            <i class="fas fa-user"></i>
                            <span id="name"></span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="navbarDropdownMenuLink-4">
                            <i class="fas fa-credit-card"></i>
                            <span id="points"></span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i>
                            <span id="logout">Logout</span>
                        </a>
            </div>
            </li>
            </ul>
            </div>
        </nav>
    </section>
    <!--/.Navbar -->
    <div class="container">

        <div class="row" style="margin: 60px; width:1400px;margin-left:390px">
            <div id="bb1" class="col-md-3 text-center">
                <a id="b1" href="/createVisit.html" style=" width: 300px"
                    class="btn btn-outline-info btn-lg btn-block waves-effect">
                    Post A Visit
                </a>
            </div>
        </div>
        <div class="row" style="margin: 60px;width:1400px;margin-left:390px">
            <div class="col-md-3 text-center">
                <a href="/visits.html" style=" width: 300px" class="btn btn-outline-info btn-lg btn-block waves-effect">
                    View My Visits
                </a>
            </div>
        </div>
        <div class="row" style="margin: 60px;width:1400px;margin-left:390px">
            <div class="col-md-3 text-center">
                <a href="/createRequest.html" style=" width: 300px"
                    class="btn btn-outline-info btn-lg btn-block waves-effect">
                    Post A Request
                </a>
            </div>
        </div>
        <div class="row" style="margin: 60px;width:1400px;margin-left:390px">
            <div class="col-md-3 text-center">
                <a href="/requests.html" style=" width: 300px"
                    class="btn btn-outline-info btn-lg btn-block waves-effect">
                    View My Requests
                </a>
            </div>
        </div>

    </div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"> </script>
    <!-- Bootstrap
        core JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/js/mdb.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
</body>

</html>